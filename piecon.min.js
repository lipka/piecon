!function(){var e={},t=null,i=null,n=null,o=null,r={},a={},h={color:"#ff0084",background:"#bbb",shadow:"#fff",fallback:!1},l=window.devicePixelRatio>1,c=function(){var e=navigator.userAgent.toLowerCase();return function(t){return-1!==e.indexOf(t)}}(),f={ie:c("msie"),chrome:c("chrome"),webkit:c("chrome")||c("safari"),safari:c("safari")&&!c("chrome"),mozilla:c("mozilla")&&!c("chrome")&&!c("safari")},u=function(){for(var e=document.getElementsByTagName("link"),t=0,i=e.length;i>t;t++)if("icon"===e[t].getAttribute("rel")||"shortcut icon"===e[t].getAttribute("rel"))return e[t];return!1},d=function(){for(var e=Array.prototype.slice.call(document.getElementsByTagName("link"),0),t=document.getElementsByTagName("head")[0],i=0,n=e.length;n>i;i++)("icon"===e[i].getAttribute("rel")||"shortcut icon"===e[i].getAttribute("rel"))&&t.removeChild(e[i])},g=function(e){d();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},m=function(){return o||(o=document.createElement("canvas"),l?(o.width=32,o.height=32):(o.width=16,o.height=16)),o},s=function(e){if(a.useCache&&e in r)return g(r[e]);var t=m(),i=t.getContext("2d");e=e||0,i&&(i.clearRect(0,0,t.width,t.height),i.beginPath(),i.moveTo(t.width/2,t.height/2),i.arc(t.width/2,t.height/2,Math.min(t.width/2,t.height/2),0,2*Math.PI,!1),i.fillStyle=a.shadow,i.fill(),i.beginPath(),i.moveTo(t.width/2,t.height/2),i.arc(t.width/2,t.height/2,Math.min(t.width/2,t.height/2)-2,0,2*Math.PI,!1),i.fillStyle=a.background,i.fill(),e>0&&(i.beginPath(),i.moveTo(t.width/2,t.height/2),i.arc(t.width/2,t.height/2,Math.min(t.width/2,t.height/2)-2,-.5*Math.PI,(-.5+2*e/100)*Math.PI,!1),i.lineTo(t.width/2,t.height/2),i.fillStyle=a.color,i.fill()),r[e]=t.toDataURL(),g(r[e]))},w=function(e){e>0?document.title="("+e+"%) "+n:document.title=n};e.setOptions=function(e){a={};for(var t in h)a[t]=e.hasOwnProperty(t)?e[t]:h[t];return this},e.setProgress=function(e){if(n||(n=document.title),!i||!t){var o=u();i=t=o?o.getAttribute("href"):"/favicon.ico"}return!isNaN(parseFloat(e))&&isFinite(e)?!m().getContext||f.ie||f.safari||a.fallback===!0?w(e):("force"===a.fallback&&w(e),s(e)):!1},e.reset=function(){n&&(document.title=n),i&&(t=i,g(t))},e.destroy=function(){e.reset(),r={}},e.setOptions(h),"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module?module.exports=e:window.Piecon=e}();